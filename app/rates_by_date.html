<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type="text/javascript" src="js/yodatepicker.js"></script>
<link type="text/css" rel="stylesheet" href="styles/rates-calendar.css" />
<script type="text/javascript">

    // Perhaps some repsonse form some an API.
    var response = [
        { rate: { date: '2014-11-12', price: '12.00' }},
        { rate: { date: '2014-11-13', price: '13.00' }},
        { rate: { date: '2014-11-14', price: '14.00' }},
        { rate: { date: '2014-11-15', price: '209.00' }},
        { rate: { date: '2014-11-16', price: '209.00' }},
        { rate: { date: '2014-11-17', price: '209.00' }},
        { rate: { date: '2014-11-18', price: '209.00' }},
        { rate: { date: '2014-11-19', price: '209.00' }},
        { rate: { date: '2014-11-20', price: '209.00' }},
        { rate: { date: '2014-11-21', price: '209.00' }},
        { rate: { date: '2014-11-22', price: '209.00' }},
        { rate: { date: '2014-11-23', price: '209.00' }},
        { rate: { date: '2014-11-24', price: '209.00' }},
        { rate: { date: '2014-11-25', price: '209.00' }},
        { rate: { date: '2014-11-26', price: '209.00' }},
        { rate: { date: '2014-11-27', price: '209.00' }},
        { rate: { date: '2014-11-28', price: '28.00' }},
        { rate: { date: '2014-11-29', price: '29.00' }},
        { rate: { date: '2014-11-30', price: '30.00' }},
        { rate: { date: '2014-12-01', price: '1.00' }},
        { rate: { date: '2014-12-02', price: '2.00' }},
        { rate: { date: '2014-12-03', price: '3.00' }},
        { rate: { date: '2014-12-04', price: '4.00' }}
    ];

    /* The yodatepicker needs it in this format:
    var cell_content = [
        { '10_28_2014': '209.00' },
        { '10_29_2014': '189.00' },
        { '10_30_2014': '169.00' },
        { '11_1_2014' : '169.00' },
        { '11_2_2014' : '169.00' },
        { '11_3_2014' : '169.00' },
        { '11_4_2014' : '169.00' },
        { '11_5_2014' : '169.00' },
        { '11_6_2014' : '169.00' }
    ];
    */

    var convert_to_yo_cell_format = function(response) {
        var key, value, data = [];
        for(var i = 0; i < response.length; i++) {
            // NOTE: The key must be a string representing the date
            // that the value is to used.  The format of key is:
            // Date.getMonth() + '_' + Date.getDate() + '_' + Date.getFullYear()
            //
            try {
                // The rate date from the response should be YYYY-MM-DD format.
                var parts = response[i].rate.date.split('-');
                var rate_date = new Date(parts[0], (parts[1] -1), parts[2]);

                key = rate_date.getMonth() + '_' + rate_date.getDate() + '_' +
                      rate_date.getFullYear();
                value = response[i].rate.price;

                data[i] = {};
                data[i][key] = add_rate_style(value);
            } catch(e) {
                console.log(e.toString());
            }
        }
        return data;
    };

    var add_rate_style = function(value) {
        return '<div class="yo-rate-item">$' + value + '</div>';
    };

    var double_datepicker = yodatepicker({
        dp_id_name: 'dp_price_calendar',
        id_name: 'price_calendar',
        dow_heading: 'short_name',
        months_to_display: 2,       // display two months
        close_onselect: false,      // display the calendar all the time
        max_date: '3M',
        min_date: new Date(),
        locale: 'en',
        cell_content: convert_to_yo_cell_format(response)
    });

</script>
<script src="vendor/google-code-prettify/bin/run_prettify.min.js"></script>

<title>yodatepicker</title>
<style>
a { text-decoration: none; color: #0000ff; }

a:hover { text-decoration: underline; color: #cd0000; }

hr { background-color: #cd0000; width: 100%; height: 1px; }

.myfont1 {
    font-family: Verdana, Arial, sans-serif;
    font-size: .9em;
}

.biggertext {
    font-family: verdana, arial;
    font-size: 1.2em;
    color: #0000ff;
    font-weight: normal;
}

.bigtext {
    font-family: verdana, arial;
    font-size: .9em;
    color: #0000ff;
    font-weight: normal;
}

body { background-color: #f0f0f0; }

</style>
</head>


<body>

<center>
    <h2 class="biggertext">yodatepicker</h2>
    <span class="myfont1">A simple datepicker with *NO* dependancies.</span>
</center>
<hr style="height: 1px; color: #cd0000;" />
<br />

<div class="bigtext">
That's right, not even jQuery is used.  Just good ol' fashion javascript!
</div>

<br />
<br />

<center>
    <div id="dp_price_calendar"></div>
    <br />
    <br />
    Check-In: <input type="text" id="price_calendar" value="" />
    <script type="text/javascript">double_datepicker.show();</script>
</center>

<pre class="prettyprint lang-js" style="background-color: #ffffff;">
    var double_datepicker = yodatepicker({
        dp_id_name: 'dp_price_calendar',
        id_name: 'price_calendar',
        dow_heading: 'short_name',
        months_to_display: 2,       // display two months
        close_onselect: false,      // display the calendar all the time
        max_date: '3M',             // max date that can be selected = today + 3 months
        min_date: new Date(),       // min date that can be selected = today
        locale: 'en',
        cell_content: convert_to_yo_cell_format(response)
    });
</pre>
<br />

<!-- Usage & Options -->

<div class="bigtext">Usage &amp; Options</div>
<pre class="prettyprint lang-js" style="background-color: #ffffff;">
&lt;script type="text/javascript" src="js/yodatepicker.js"&gt;&lt;/script&gt;
&lt;link type="text/css" rel="stylesheet" href="styles/yodatepicker.css" /&gt;
&lt;link type="text/css" rel="stylesheet" href="styles/yodatepicker-multi.css" /&gt;

&lt;script type="text/javascript"&gt;

var options = {
    dp_id_name: 'div_id',              // Element id where to display yodatepicker
    id_name: 'input_date',             // Element id where to put the selected date
    locale: 'en',                      // Localization supported: en, es, fr
    months_to_display: 2,              // Defaults to display one month
    close_onselect: false,             // Boolean defaults to true; False sets yodatepicker to always display.
    max_date: '1Y',                    // Max date that can be selected and scrolled forward to.
    min_date: '3M',                    // Min date that can be selected and scrolled backward to.
    onClose: function() { },           // Callback function fired when yodatepicker is closed.
    onDateSelected: function() { }     // Callback function fired when a date is selected.
};

var my_datepicker = yodatepicker(options);

&lt;/script&gt;
</pre>

<pre class="prettyprint lang-html" style="background-color: #ffffff;">
&lt;input id="input_date" type="text" onclick="my_datepicker.show();" /&gt;
&lt;div id="div_id"&gt;&lt;/div&gt;
</pre>

<br />
<br />
</body>
</html>
